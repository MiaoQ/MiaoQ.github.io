---
title: echarts的简单使用
date: 2019-05-05 19:32:04
tags: tips
gitment: echarts的简单使用
description: 简单描述一下在react中用echarts画出一个圆环图的过程
---

1. 安装`echarts`
```jsx
npm install echarts --save
```

2. 在react组件文件中引入相关依赖
```jsx
import echarts from 'echarts/lib/echarts'
import 'echarts/lib/chart/pie'
import 'echarts/lib/component/graphic'
```

3. 配置饼图数据
```jsx
const option = {
  "graphic": [{ // 设置圆环内的文本内容
    "type": "text",
    "left": "center",
    "top": "40%", // 文字位置
    "style": {
      "text": "总人数",
      "fill": "#666",
      "textAlign": "center",
      "fontSize": 16
    }
  }, {
    "type": "text",
    "left": "center",
    "top": "50%",
    "style": {
      "text": "100个",
      "fill": "#1b1d1e",
      "fontSize": 24
    }
  }],
  "series": [{ // 环，这里可以是对象，也可以是数组，只有一项时可用对象；多项时，多个环
    "type": "pie",
    "radius": ["50%", "54%"], // 环的粗细
    "itemStyle": {
      "shadowBlur": 10,
      "shadowOffsetX": 0,
      "shadowOffsetY": 4
    },
    "rich": { // 富文本样式
      "name": {
        "color": "#666c70"
      },
      "value": {
        "color": "#1b1d1e"
      }
    },
    "label": { // 统一设置环的标签样式
      "textStyle": {
        "fontSize": 14,
        "lineHeight": 22
      }
    },
    "labelLine": { // 统一设置环的线样式
      "lineStyle": {
        "color": "#e0e6ec"
      },
      "length2": 40
    },
    "data": [{ // 具体的数据项，可针对不同的数据项设置不同的样式
      "name": "男生",
      "value": 60,
      "label": { // 对数据项设置标签样式
        "show": true,
        "rich": { // 数据项的富文本，在下面的formatter里使用了
          "name": {
            "color": "#666c70",
            "fontSize": 14
          },
          "value": {
            "color": "#1b1d1e",
            "fontSize": 14
          }
        },
        // {a}指series.name {b}指series.data的name
        // {c}指series.data的value {d}%指这一部分占总数的百分比
        "formatter": "{name|{b}}\n{value|{d}% {c}}"
      },
      "labelLine": {// 对数据项设置线的样式
        "show": true
      },
      "itemStyle": {// 对数据项设置颜色、阴影等
        "color": "#8d81ff",
        "shadowColor": "#8d81ff"
      }
    }, {
      "name": "女生",
      "value": 40,
      "label": {
        "show": true,
        "rich": {
          "name": {
            "color": "#666c70",
            "fontSize": 14
          },
          "value": {
            "color": "#1b1d1e",
            "fontSize": 14
          }
        },
        "formatter": "{name|{b}}\n{value|{d}% {c}}"
      },
      "labelLine": {
        "show": true
      },
      "itemStyle": {
        "color": "#ff7045",
        "shadowColor": "#ff7045"
      }
    }]
  }]
}
```

4. 画布元素
```html
 <div id="pie" style={{ width: '100%', height: 300 }}></div>
```

5. 初始化图表
```jsx
const pieDom = document.getElementById('pie')
const pie = echarts.init(option)
pie.setOption(option)
```
